{"version":3,"sources":["webpack:///./src/server.jsx","webpack:///./src/utils/apartments.js"],"names":["path","require","express","webpack","App","default","React","StaticRouter","reactDOMServer","collect","webpackDevMiddleware","app","config","compiler","PORT","process","initialStyleTag","collectInitial","HTML","body","data","JSON","stringify","use","static","join","__dirname","publicPath","output","hot","writeToDisk","historyApiFallback","get","req","res","context","multipleAreas","locations","majorAreasData","map","lat","lng","specs","no_bed","no_bath","no_toilets","singleArea","Promise","all","predict","multipleAreasPrice","prices","singleAreaPrice","send","renderToString","url","listen","console","log","axios","post","headers","error"],"mappings":"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","file":"main.f565994bc3cb9a353112.hot-update.js","sourcesContent":["const path = require('path');\nconst express = require('express');\nconst webpack = require('webpack');\nconst App = require('./App').default;\nconst React = require('react');\nconst StaticRouter = require('react-router-dom').StaticRouter;\nconst reactDOMServer = require('react-dom/server');\nconst collect = require('node-style-loader/collect');\nconst webpackDevMiddleware = require('webpack-dev-middleware');\n\nimport apartments from './utils/apartments';\nimport predict from './utils/predict';\nimport majorAreasData from './areas';\n\nconst app = express();\nconst config = require('../config.dev.js');\nconst compiler = webpack(config[1]);\n\nconst PORT = process.env.PORT;\n\nconst initialStyleTag = collect.collectInitial();\n\nconst HTML = (body, data) => `\n    <!DOCTYPE html>\n    <html lang=\"en\">\n        <head>\n            <meta charset=\"utf-8\">\n            <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, shrink-to-fit=no\">\n            <meta name=\"theme-color\" content=\"#000000\">\n            <link href=\"https://fonts.googleapis.com/css?family=Archivo:200,400,500,700|Playfair+Display:400,900|Karla:400,700\" rel=\"stylesheet\">\n            <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\"/>\n            <title>Houserents</title>\n            ${initialStyleTag}\n        </head>\n        <body>\n            <noscript>\n                You need to enable JavaScript to run this app.\n            </noscript>\n            <div id=\"root\">${body}</div>\n            <script type=\"text/javascript\">\n                window.__DATA__ = ${JSON.stringify(data)}\n            </script>\n            <script type=\"text/javascript\" src=\"public/dist/bundle.js\"></script>\n        </body>\n    </html>\n`\n\napp.use('/public',express.static(path.join(__dirname, 'public')))\n\napp.use(webpackDevMiddleware(compiler, {\n    publicPath: config[1].output.publicPath,\n    hot: true,\n    writeToDisk: true,\n    historyApiFallback: true\n}));\n\napp.use(require(\"webpack-hot-middleware\")(compiler));\n\napp.use('/public', express.static(path.join(__dirname, '/public')));\n\napp.get(/\\/|\\/averages|\\/roomies/, async (req, res) => {\n    const context = {};\n\n    const multipleAreas = { \n        locations: majorAreasData().map(({ lat, lng }) => ({ lat, lng })), \n        specs: { no_bed: 1, no_bath: 1, no_toilets: 1 } \n    };\n\n    const singleArea = { \n        locations: [{ lat: 6.5005, lng: 3.3666 }],\n        specs: { no_bed: 1, no_bath: 1, no_toilets: 1 } \n    };\n\n    const [\n        { prices: multipleAreasPrice },\n        { prices: singleAreaPrice },\n    ] = await Promise.all([predict(multipleAreas), predict(singleArea)]);\n\n    \n    res.send(HTML(reactDOMServer.renderToString(\n        <StaticRouter location={req.url} context={context}>\n            <App />\n        </StaticRouter>\n    ), { multipleAreasPrice,  singleAreaPrice: singleAreaPrice[0] }))\n});\n\napp.listen(PORT, () => console.log(`App listening on port ${PORT}`));","import axios from 'axios';\n\nexport default async (body) => {\n    try {\n        const { data } = await axios.post(`${process.env.API_SERVER}/apartments?offset=0&limit=10`, JSON.stringify(body), {\n            headers: {\n                'Content-Type': 'application/json'\n            }\n        });\n\n        return data;\n    } catch(err) {\n        console.error(err);\n    }\n}"],"sourceRoot":""}